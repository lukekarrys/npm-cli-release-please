# This file is automatically added by @npmcli/template-oss. Do not edit.

name: Get Changed Workspaces

inputs:
  token:
    description: GitHub token to use
    required: true
  shell:
    description: shell to run on
    default: bash
  all:
    default: false
    type: boolean

outputs:
  flags:
    value: ${{ steps.workspaces.outputs.flags }}

runs:
  using: composite
  steps:
    - name: Get Changed Files
      uses: ./.github/actions/changed-files
      if: ${{ !inputs.all }}
      id: files

    - name: Get Workspaces
      shell: ${{ inputs.shell }}
      id: workspaces
      run: |
        flags=$(npm exec --offline -- template-oss-changed-workspaces '${{ (inputs.all && '--all') || steps.files.outputs.result }}')
        echo "flags=${flags}" >> $GITHUB_OUTPUT
